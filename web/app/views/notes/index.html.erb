<%# ── Quick-add bar (Keep-style) ── %>
<% unless params[:filter] == "trash" || params[:filter] == "archived" %>
  <div class="max-w-xl mx-auto mb-8">
    <%= link_to new_note_path, class: "block bg-white rounded-lg shadow border border-gray-200 px-4 py-3 text-sm text-gray-400 hover:shadow-md transition" do %>
      Take a note&hellip;
    <% end %>
  </div>
<% end %>

<%# ── Section header ── %>
<% if params[:filter].present? %>
  <div class="flex items-center mb-6">
    <h1 class="text-sm font-medium text-gray-500 uppercase tracking-wider">
      <% if params[:filter] == "archived" %>
        Archive
      <% elsif params[:filter] == "trash" %>
        Trash
      <% elsif params[:filter] == "pinned" %>
        Pinned
      <% end %>
    </h1>
  </div>
<% end %>

<% if @notes.empty? %>
  <div class="text-center py-24">
    <svg class="mx-auto w-16 h-16 text-gray-200 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/></svg>
    <p class="text-gray-400 text-lg">
      <% if params[:filter] == "trash" %>
        Trash is empty
      <% elsif params[:filter] == "archived" %>
        No archived notes
      <% else %>
        No notes yet
      <% end %>
    </p>
  </div>
<% else %>
  <%# ── Pinned section ── %>
  <% pinned = @notes.select(&:pinned?) %>
  <% unpinned = @notes.reject(&:pinned?) %>

  <% if pinned.any? && unpinned.any? && !params[:filter] %>
    <p class="text-xs font-semibold text-gray-400 uppercase tracking-wider mb-3">Pinned</p>
  <% end %>

  <% if pinned.any? %>
    <div class="columns-1 sm:columns-2 lg:columns-3 xl:columns-4 gap-4 space-y-4 mb-8">
      <% pinned.each do |note| %>
        <%= render partial: "notes/card", locals: { note: note } %>
      <% end %>
    </div>
  <% end %>

  <% if unpinned.any? && pinned.any? && !params[:filter] %>
    <p class="text-xs font-semibold text-gray-400 uppercase tracking-wider mb-3">Others</p>
  <% end %>

  <% if unpinned.any? %>
    <div class="columns-1 sm:columns-2 lg:columns-3 xl:columns-4 gap-4 space-y-4">
      <% unpinned.each do |note| %>
        <%= render partial: "notes/card", locals: { note: note } %>
      <% end %>
    </div>
  <% end %>

  <% if @pagy.pages > 1 %>
    <div class="mt-10 flex justify-center">
      <%== pagy_nav(@pagy) %>
    </div>
  <% end %>
<% end %>
