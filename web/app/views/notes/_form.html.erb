<%= form_with model: note, class: "max-w-2xl mx-auto" do |f| %>
  <div class="bg-white rounded-2xl border border-gray-200 shadow-md overflow-hidden">
    <% if note.errors.any? %>
      <div class="p-4 bg-red-50 border-b border-red-200 text-red-700 text-sm">
        <ul class="list-disc pl-4 space-y-0.5">
          <% note.errors.full_messages.each do |msg| %>
            <li><%= msg %></li>
          <% end %>
        </ul>
      </div>
    <% end %>

    <%# Title field â€” borderless, big %>
    <div class="px-5 pt-5">
      <%= f.text_field :title, placeholder: "Title", class: "w-full text-lg font-medium border-0 p-0 focus:ring-0 bg-transparent placeholder-gray-400 text-gray-900" %>
    </div>

    <%# Editor area %>
    <div class="px-5 pb-4" data-controller="editor">
      <%= f.text_area :body, data: { editor_target: "markdownEditor" }, class: "w-full min-h-[250px] font-mono text-sm p-0 border-0 focus:ring-0 bg-transparent resize-y text-gray-700 placeholder-gray-400 mt-3 pt-2 border-t border-gray-100", placeholder: "Take a note (markdown supported)..." %>

      <%# Bottom toolbar %>
      <div class="px-4 py-3 border-t border-gray-100 flex items-center justify-between bg-gray-50/50 -mx-5 -mb-4 mt-4">
        <div class="text-xs text-gray-400">
          <span data-editor-target="charCount">0</span> / <%= note.max_size || 32_768 %> chars
        </div>
      <div class="flex items-center gap-2">
        <%= link_to "Cancel", note.persisted? ? note_path(note) : notes_path, class: "px-4 py-2 text-sm text-gray-600 hover:text-gray-800 font-medium transition" %>
        <%= f.submit note.persisted? ? "Save" : "Create", class: "px-5 py-2 bg-amber-500 text-white text-sm font-medium rounded-lg hover:bg-amber-600 transition cursor-pointer shadow-sm" %>
      </div>
      </div>
    </div>
  </div>
<% end %>
